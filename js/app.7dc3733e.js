(function(){"use strict";var e={2468:function(e,t,a){var n=a(5130),s=(a(4114),a(8111),a(2489),a(1701),a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698),a(6768)),i=a(4232),r=a(144),l=a(6293);const o=11155111,u="0xaa36a7",p=3e3,c=5e3;let d;const y=()=>{if("undefined"===typeof window)return null;try{return window.ethereum?(d=new l.Ay$(window.ethereum),m(),console.debug("[Web3] 实例初始化成功"),d):(console.error("[Web3] 未检测到以太坊提供商"),null)}catch(e){return console.error("[Web3] 初始化失败:",e),null}},m=()=>{window.ethereum?.on("chainChanged",v),window.ethereum?.on("accountsChanged",f)},v=e=>{const t=parseInt(e,16);console.debug("[Web3] 网络变更:",t)},f=e=>{console.debug("[Web3] 账户变更:",e)},b=async()=>{if(!d)throw new Error("Web3未初始化");try{const e=await h();e!==o&&await k();const t=await w();return t}catch(e){throw console.error("[Web3] 连接全流程错误:",e),T(e)}},h=()=>Promise.race([d.eth.getChainId(),new Promise(((e,t)=>setTimeout((()=>t(new Error("网络状态请求超时"))),p)))]),k=async()=>{try{await Promise.race([window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:u}]}),new Promise(((e,t)=>setTimeout((()=>t(new Error("网络切换超时"))),p)))])}catch(e){if(4902!==e.code)throw new Error(e.message||"网络切换被拒绝");await g()}},g=async()=>{try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:u,chainName:"Sepolia Test Network",nativeCurrency:{name:"Sepolia ETH",symbol:"ETH",decimals:18},rpcUrls:["https://rpc.sepolia.org"],blockExplorerUrls:["https://sepolia.etherscan.io"]}]})}catch(e){throw new Error(e.message||"添加网络失败")}},w=async()=>{const e=await Promise.race([window.ethereum.request({method:"eth_requestAccounts"}),new Promise(((e,t)=>setTimeout((()=>t(new Error("账户请求超时"))),c)))]);if(!e?.[0])throw new Error("未获取到有效账户");return e[0]},T=e=>{const t={"User rejected the request":"用户取消操作",wallet_addEthereumChain:"用户拒绝添加网络",wallet_switchEthereumChain:"用户拒绝切换网络"};return new Error(t[e?.message]||e.message||"未知错误")},L=async()=>{try{const e=await d.eth.getAccounts();return e[0]||null}catch(e){return console.error("[Web3] 获取账户失败:",e),null}},C=e=>{window.ethereum?.on("chainChanged",(t=>{e(parseInt(t,16))}))},E=()=>{if(!d)throw new Error("Web3未初始化");return d},W=[{inputs:[{internalType:"uint256",name:"initialSupply",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"allowance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientAllowance",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC20InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC20InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC20InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"}],name:"ERC20InvalidSpender",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"string",name:"message",type:"string"}],name:"BurnSuccess",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"string",name:"message",type:"string"}],name:"MintSuccess",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"},{indexed:!1,internalType:"string",name:"message",type:"string"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],_=[{inputs:[{internalType:"address",name:"_governanceToken",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"uint256",name:"_proposalId",type:"uint256"}],name:"closeProposal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_description",type:"string"},{internalType:"uint256",name:"_duration",type:"uint256"}],name:"createProposal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAllProposals",outputs:[{components:[{internalType:"string",name:"description",type:"string"},{internalType:"uint256",name:"forWeight",type:"uint256"},{internalType:"uint256",name:"againstWeight",type:"uint256"},{internalType:"uint256",name:"duration",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"},{internalType:"enum Voting.ProposalStatus",name:"status",type:"uint8"},{internalType:"bool",name:"executed",type:"bool"}],internalType:"struct Voting.Proposal[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"governanceToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_proposalId",type:"uint256"}],name:"isProposalPassed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"proposals",outputs:[{internalType:"string",name:"description",type:"string"},{internalType:"uint256",name:"forWeight",type:"uint256"},{internalType:"uint256",name:"againstWeight",type:"uint256"},{internalType:"uint256",name:"duration",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"},{internalType:"enum Voting.ProposalStatus",name:"status",type:"uint8"},{internalType:"bool",name:"executed",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"stake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"stakedTokens",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_proposalId",type:"uint256"}],name:"startProposal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"unstake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_proposalId",type:"uint256"},{internalType:"bool",name:"isFor",type:"bool"}],name:"vote",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"voters",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],P="0xf21cf87969a36dd691ecb94da5f170f11307b93b",M="0x617cdba47a2c352802abe15fc6f5ae0e791c8cff";let x,O;const $=async()=>{const e=E();x=new e.eth.Contract(W,P),O=new e.eth.Contract(_,M),console.log("合约初始化成功")},I=()=>{if(!x)throw new Error("治理代币合约未初始化");return x},S=()=>{if(!O)throw new Error("投票合约未初始化");return O},R={class:"app-container"},X={class:"wallet-status"},K={key:1,class:"account-info"},A={class:"account-address"},F={key:0,class:"network-alert"},D={class:"notification-content"},V={class:"icon"},Q={class:"main-content"},j={key:0,class:"error-alert"},q={key:0,class:"error-alert"},N={class:"dashboard"},U={class:"info-card"},B={class:"asset-item"},J={class:"value"},H={class:"asset-item"},z={class:"value highlight"},G={class:"info-card"},Y={class:"stake-controls"},Z={key:0,class:"approve-status"},ee={class:"info-card quick-actions"},te={class:"quick-action-buttons"},ae={class:"proposals-list"},ne={key:0,class:"empty-state"},se={key:1,class:"proposals-container"},ie={class:"proposal-header"},re={class:"proposal-meta"},le={class:"proposal-title"},oe={class:"status-container"},ue=["onClick","disabled"],pe={class:"time-remaining"},ce={class:"proposal-actions"},de=["onClick"],ye={class:"voting-progress"},me={class:"progress-item"},ve={class:"progress-header"},fe={class:"progress-stats"},be={class:"progress-weight"},he={class:"progress-percent"},ke={class:"progress-bar"},ge={class:"progress-item"},we={class:"progress-header"},Te={class:"progress-stats"},Le={class:"progress-weight"},Ce={class:"progress-percent"},Ee={class:"progress-bar"},We={key:0,class:"voting-actions"},_e=["onClick"],Pe=["onClick"],Me={key:1,class:"voted-indicator"},xe={key:2,class:"warning-message"},Oe={class:"vote-summary"},$e={key:1,class:"connect-prompt"},Ie={key:0,class:"modal-overlay"},Se={class:"modal-content"},Re={class:"modal-header"},Xe={class:"modal-body"},Ke={class:"form-group"},Ae={class:"form-group"},Fe={class:"duration-input-group"},De={class:"modal-actions"};var Ve={__name:"App",setup(e){const t=(0,r.KR)(null),a=(0,r.KR)(null),l=(0,r.KR)(!1),u=(0,r.KR)(!1),p=(0,r.KR)(""),c=(0,r.KR)(24),d=(0,r.KR)(0),m=(0,r.KR)(""),v=(0,r.KR)(!1),f=(0,r.KR)(0),h=(0,r.KR)(0),k=(0,r.KR)([]),g=(0,r.KR)(""),w=(0,r.KR)({mint:!1,stake:!1,unstake:!1,createProposal:!1,vote:new Set,startProposal:new Set,closeProposal:new Set}),T=(0,r.KR)([]),W={error:"❌",success:"✅",warning:"⚠️",loading:"⏳"},_=(e,t="error",a=!1)=>{const n=Date.now();return T.value.push({id:n,message:e,type:t,persistent:a}),setTimeout((()=>{T.value=T.value.filter((e=>e.id!==n))}),5e3),n},P=e=>_(e,"error"),x=e=>_(e,"loading",!0);(0,s.sV)((async()=>{try{await y(),await $(),O(),C(je)}catch(e){}})),(0,s.hi)((()=>{clearInterval(it.value)}));const O=async()=>{try{const e=await L();e&&(a.value=e,await Qe(),await qe())}catch(e){console.error("自动连接检查失败:",e)}},Ve=async()=>{console.log(1);try{console.log(2),a.value=await b(),l.value=!1,await qe()}catch(e){console.log(3),P("连接失败: "+(e.message||"用户取消操作"))}},Qe=async()=>{try{const e=Number(await E().eth.getChainId());console.log("网络检查:",`当前链ID: ${e}（类型: ${typeof e}）`,`目标链ID: ${o}（类型: ${typeof o}）`),l.value=e!==o,console.log("比较结果:",l.value?"网络错误":"网络正确",`计算式: ${e} !== ${o}`)}catch{l.value=!0}},je=e=>{console.log("处理网络变更:",`收到链ID: ${e}（类型: ${typeof e}）`,`目标链ID: ${o}（类型: ${typeof o}）`),l.value=e!==o,console.log("比较结果:",l.value?"网络错误":"网络正确",`计算式: ${e} !== ${o}`),l.value||qe()};async function qe(){if(!l.value)try{const e=I(),t=S();g.value=await e.methods.symbol().call();const n=await e.methods.balanceOf(a.value).call();f.value=et(n);const s=await t.methods.stakedTokens(a.value).call();h.value=et(s);const i=await t.methods.getAllProposals().call();k.value=await Promise.all(i.map((async(e,n)=>{const s=Math.floor(Date.now()/1e3),i=1===e.status&&Number(e.endTime)<s;return{...e,forWeight:et(e.forWeight),againstWeight:et(e.againstWeight),endTime:Number(e.endTime),status:i?2:Number(e.status),hasVoted:await t.methods.voters(n,a.value).call(),isPassed:2===e.status&&await t.methods.isProposalPassed(n).call(),isOverdue:i}})))}catch(e){}}const Ne=()=>!!l.value&&(P("请先切换到Sepolia网络"),!0),Ue=async()=>{if(Ne())return;const e=x("代币铸造中...");w.value.mint=!0;try{const t=I(),n=1e3;await t.methods.mint(E().utils.toWei(n.toString(),"ether")).send({from:a.value}),await qe(),T.value=T.value.map((t=>t.id===e?{...t,message:`成功领取 ${n} ${g.value}`,type:"success",persistent:!1}:t))}catch(t){T.value=T.value.filter((t=>t.id!==e)),st(t,"领取测试币失败")}finally{w.value.mint=!1}},Be=async()=>{if(Ne())return;const e=x("质押处理中...");w.value.stake=!0;try{if(d.value>f.value)return void P("质押数量不能超过账户余额");if(!d.value||d.value<=0)return void P("请输入有效的质押数量");const t=I(),n=E().utils.toWei(d.value.toString(),"ether"),s=await t.methods.allowance(a.value,M).call();Number(s)<Number(n)&&(m.value="授权中...",v.value=!0,await t.methods.approve(M,n).send({from:a.value}),m.value="授权成功");const i=S();await i.methods.stake(n).send({from:a.value}),await qe(),T.value=T.value.map((t=>t.id===e?{...t,message:`成功质押 ${d.value} ${g.value}`,type:"success",persistent:!1}:t))}catch(t){T.value=T.value.filter((t=>t.id!==e)),st(t,(v.value,"质押失败"))}finally{w.value.stake=!1,v.value=!1}},Je=async()=>{if(Ne())return;const e=x("解除质押中...");w.value.unstake=!0;try{if(d.value<=0)return void P("请输入有效的解除质押数量");if(d.value>h.value)return void P(`解除质押数量不能超过已质押数量（当前质押：${h.value} ${g.value}）`);const t=S();await t.methods.unstake(E().utils.toWei(d.value.toString(),"ether")).send({from:a.value}),await qe(),T.value=T.value.map((t=>t.id===e?{...t,message:`成功解除质押 ${d.value} ${g.value}`,type:"success",persistent:!1}:t))}catch(t){T.value=T.value.filter((t=>t.id!==e)),st(t,"解除质押失败")}finally{w.value.unstake=!1}},He=async()=>{if(Ne())return;const e=x("提案创建中...");w.value.createProposal=!0;try{const t=S(),n=3600*c.value;await t.methods.createProposal(p.value,n).send({from:a.value}),u.value=!1,await qe(),T.value=T.value.map((t=>t.id===e?{...t,message:"提案创建成功",type:"success",persistent:!1}:t))}catch(t){T.value=T.value.filter((t=>t.id!==e)),st(t,"提案创建失败")}finally{w.value.createProposal=!1}},ze=async(e,t)=>{const n=x("提交投票中...");w.value.vote.add(e);try{if(k.value[e].hasVoted)return void P("您已经参与过该提案投票");if(0===h.value)return void P("请先质押代币获得投票权");const s=S();await s.methods.vote(e,t).send({from:a.value}),k.value=k.value.map(((a,n)=>n===e?{...a,hasVoted:!0,forWeight:t?a.forWeight+h.value:a.forWeight,againstWeight:t?a.againstWeight:a.againstWeight+h.value}:a)),T.value=T.value.map((e=>e.id===n?{...e,message:"投票成功",type:"success",persistent:!1}:e))}catch(s){T.value=T.value.filter((e=>e.id!==n)),st(s,"投票失败")}finally{w.value.vote.delete(e)}},Ge=async e=>{if(Ne())return;const t=x("启动投票中...");w.value.startProposal.add(e);try{const n=S();await n.methods.startProposal(e).send({from:a.value}),k.value=k.value.map(((t,a)=>a===e?{...t,status:1,endTime:Math.floor(Date.now()/1e3)+t.duration}:t)),T.value=T.value.map((e=>e.id===t?{...e,message:"成功启动投票",type:"success",persistent:!1}:e))}catch(n){T.value=T.value.filter((e=>e.id!==t)),st(n,"启动投票失败")}finally{w.value.startProposal.delete(e)}},Ye=async e=>{const t=x("正在关闭提案...");w.value.closeProposal.add(e);try{const n=S();await n.methods.closeProposal(e).send({from:a.value}),k.value=k.value.map(((t,a)=>a===e?{...t,status:2,isPassed:t.forWeight>t.againstWeight}:t)),T.value=T.value.map((e=>e.id===t?{...e,message:"提案已关闭",type:"success",persistent:!1}:e))}catch(n){T.value=T.value.filter((e=>e.id!==t)),st(n,"关闭提案失败")}finally{w.value.closeProposal.delete(e)}},Ze=e=>e?`${e.slice(0,6)}...${e.slice(-4)}`:"",et=e=>Number(E().utils.fromWei(e.toString(),"ether"));function tt(e){return{0:"bg-gray-100 text-gray-600",1:"bg-blue-100 text-blue-600",2:"bg-purple-100 text-purple-600"}[e]}function at(e){return{0:"等待开始",1:"投票中",2:""}[e]}function nt(e,t){const a=e.forWeight+e.againstWeight;return 0===a?0:((t?e.forWeight:e.againstWeight)/a*100).toFixed(1)}async function st(e,t){console.error(t,e),P(`${t}: ${e.message||"未知错误"}`)}const it=(0,r.KR)(null);function rt(e){if(!e)return"-";const t=Math.floor(Date.now()/1e3),a=e-t;if(a<=0)return"已结束";const n=Math.floor(a/3600),s=Math.floor(a%3600/60),i=a%60;return`${n}时${s}分${i}秒`}return(0,s.sV)((()=>{it.value=setInterval((()=>{k.value=k.value.map((e=>{const t=Math.floor(Date.now()/1e3);return{...e,status:1===e.status&&e.endTime<t?2:e.status,isOverdue:1===e.status&&e.endTime<t}}))}),1e3)})),(0,s.hi)((()=>{clearInterval(it.value)})),(e,r)=>((0,s.uX)(),(0,s.CE)("div",R,[(0,s.Lk)("div",X,[a.value?((0,s.uX)(),(0,s.CE)("div",K,[(0,s.Lk)("span",A,(0,i.v_)(Ze(a.value)),1),l.value?((0,s.uX)(),(0,s.CE)("span",F,"⚠️ 请切换到Sepolia测试网")):(0,s.Q3)("",!0)])):((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:Ve,class:"connect-btn"}," 🔗 连接钱包 "))]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[(0,s.bF)(n.F,{name:"notification"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(T.value,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:(0,i.C4)(["notification",e.type])},[(0,s.Lk)("div",D,[(0,s.Lk)("span",V,(0,i.v_)(W[e.type]),1),(0,s.eW)(" "+(0,i.v_)(e.message),1)])],2)))),128))])),_:1})])),r[25]||(r[25]=(0,s.Lk)("header",{class:"app-header"},[(0,s.Lk)("div",{class:"header-content"},[(0,s.Lk)("h1",{class:"logo"},[(0,s.Lk)("span",{class:"gradient-text"},"DAO Governance")])])],-1)),(0,s.Lk)("main",Q,[(0,s.bF)(n.eB,{name:"fade"},{default:(0,s.k6)((()=>[t.value?((0,s.uX)(),(0,s.CE)("div",j,(0,i.v_)(t.value),1)):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(n.eB,{name:"fade"},{default:(0,s.k6)((()=>[l.value?((0,s.uX)(),(0,s.CE)("div",q," ⚠️ 请将钱包网络切换至Sepolia测试网 ")):(0,s.Q3)("",!0)])),_:1}),a.value&&!l.value?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("div",N,[(0,s.Lk)("div",U,[r[8]||(r[8]=(0,s.Lk)("h2",{class:"card-title"},"资产概览",-1)),(0,s.Lk)("div",B,[r[6]||(r[6]=(0,s.Lk)("span",{class:"label"},"账户余额",-1)),(0,s.Lk)("span",J,(0,i.v_)(f.value)+" "+(0,i.v_)(g.value),1)]),(0,s.Lk)("div",H,[r[7]||(r[7]=(0,s.Lk)("span",{class:"label"},"质押数量",-1)),(0,s.Lk)("span",z,(0,i.v_)(h.value)+" "+(0,i.v_)(g.value),1)])]),(0,s.Lk)("div",G,[r[11]||(r[11]=(0,s.Lk)("h2",{class:"card-title"},"代币质押",-1)),(0,s.Lk)("div",Y,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>d.value=e),type:"number",placeholder:"输入质押数量",class:"stake-input",min:"0",step:"1"},null,512),[[n.Jo,d.value,void 0,{number:!0}]]),(0,s.Lk)("div",{class:"stake-action-group"},[(0,s.Lk)("button",{class:"action-btn stake-btn primary",onClick:Be},r[9]||(r[9]=[(0,s.Lk)("span",{class:"btn-icon"},"🔒",-1),(0,s.eW)(" 立即质押 ")])),(0,s.Lk)("button",{class:"action-btn stake-btn secondary",onClick:Je},r[10]||(r[10]=[(0,s.Lk)("span",{class:"btn-icon"},"🔓",-1),(0,s.eW)(" 解除质押 ")]))]),m.value?((0,s.uX)(),(0,s.CE)("div",Z,(0,i.v_)(m.value),1)):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",ee,[r[14]||(r[14]=(0,s.Lk)("h2",{class:"card-title"},"快速操作",-1)),(0,s.Lk)("div",te,[(0,s.Lk)("button",{onClick:r[1]||(r[1]=e=>u.value=!0),class:"quick-action-btn"},r[12]||(r[12]=[(0,s.Lk)("span",{class:"icon"},"➕",-1),(0,s.Lk)("span",null,"创建提案",-1)])),(0,s.Lk)("button",{onClick:Ue,class:"quick-action-btn mint"},r[13]||(r[13]=[(0,s.Lk)("span",{class:"icon"},"🪙",-1),(0,s.Lk)("span",null,"领取测试代币",-1)]))])])]),(0,s.Lk)("div",ae,[r[18]||(r[18]=(0,s.Lk)("h2",{class:"section-title"},"治理提案",-1)),0===k.value.length?((0,s.uX)(),(0,s.CE)("div",ne,r[15]||(r[15]=[(0,s.Lk)("p",null,"当前没有进行中的提案",-1)]))):((0,s.uX)(),(0,s.CE)("div",se,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(k.value,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"proposal-card"},[(0,s.Lk)("div",ie,[(0,s.Lk)("div",re,[(0,s.Lk)("h3",le," #"+(0,i.v_)(t)+" "+(0,i.v_)(e.description),1),(0,s.Lk)("div",oe,[(0,s.Lk)("span",{class:(0,i.C4)([tt(e.status),"status-badge"])},[(0,s.eW)((0,i.v_)(at(e.status))+" ",1),1===e.status&&e.endTime<Math.floor(Date.now()/1e3)?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:e=>Ye(t),class:"status-action-btn",disabled:w.value.closeProposal.has(t)},(0,i.v_)(w.value.closeProposal.has(t)?"处理中...":"结束投票"),9,ue)):(0,s.Q3)("",!0)],2),(0,s.Lk)("span",pe,(0,i.v_)(rt(e.endTime)),1)])]),(0,s.Lk)("div",ce,[0===e.status?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:e=>Ge(t),class:"action-btn small"}," 启动投票 ",8,de)):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",ye,[(0,s.Lk)("div",me,[(0,s.Lk)("div",ve,[r[16]||(r[16]=(0,s.Lk)("span",{class:"progress-label agree"},"赞成",-1)),(0,s.Lk)("div",fe,[(0,s.Lk)("span",be,(0,i.v_)(e.forWeight),1),(0,s.Lk)("span",he,(0,i.v_)(nt(e,!0))+"%",1)])]),(0,s.Lk)("div",ke,[(0,s.Lk)("div",{class:"progress-fill agree",style:(0,i.Tr)({width:`${nt(e,!0)}%`})},null,4)])]),(0,s.Lk)("div",ge,[(0,s.Lk)("div",we,[r[17]||(r[17]=(0,s.Lk)("span",{class:"progress-label disagree"},"反对",-1)),(0,s.Lk)("div",Te,[(0,s.Lk)("span",Le,(0,i.v_)(e.againstWeight),1),(0,s.Lk)("span",Ce,(0,i.v_)(nt(e,!1))+"%",1)])]),(0,s.Lk)("div",Ee,[(0,s.Lk)("div",{class:"progress-fill disagree",style:(0,i.Tr)({width:`${nt(e,!1)}%`})},null,4)])])]),1===e.status?((0,s.uX)(),(0,s.CE)("div",We,[e.hasVoted?((0,s.uX)(),(0,s.CE)("div",Me," ✅ 您已参与投票 ")):((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("button",{onClick:e=>ze(t,!0),class:"vote-btn agree"}," ✓ 赞成 ",8,_e),(0,s.Lk)("button",{onClick:e=>ze(t,!1),class:"vote-btn disagree"}," ✕ 反对 ",8,Pe)],64)),0===h.value?((0,s.uX)(),(0,s.CE)("div",xe," ⚠️ 请先质押代币获得投票权 ")):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),2===e.status?((0,s.uX)(),(0,s.CE)("div",{key:1,class:(0,i.C4)(["proposal-result",e.isPassed?"passed":"rejected"])},[(0,s.eW)((0,i.v_)(e.isPassed?"🎉 提案已通过":"❌ 提案未通过")+" ",1),(0,s.Lk)("span",Oe," (赞成 "+(0,i.v_)(e.forWeight)+" vs 反对 "+(0,i.v_)(e.againstWeight)+") ",1)],2)):(0,s.Q3)("",!0)])))),128))]))])],64)):a.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",$e,r[19]||(r[19]=[(0,s.Lk)("h2",null,"欢迎来到我的DAO治理平台",-1),(0,s.Lk)("p",null,"请先连接钱包开始使用",-1)])))]),(0,s.bF)(n.eB,{name:"modal"},{default:(0,s.k6)((()=>[u.value?((0,s.uX)(),(0,s.CE)("div",Ie,[(0,s.Lk)("div",Se,[(0,s.Lk)("div",Re,[r[20]||(r[20]=(0,s.Lk)("h3",{class:"modal-title"},"🗳️ 创建新提案",-1)),(0,s.Lk)("button",{onClick:r[2]||(r[2]=e=>u.value=!1),class:"modal-close-btn"}," × ")]),(0,s.Lk)("div",Xe,[(0,s.Lk)("div",Ke,[r[21]||(r[21]=(0,s.Lk)("label",{class:"form-label"},[(0,s.Lk)("span",{class:"label-icon"},"📝"),(0,s.eW)(" 提案描述 ")],-1)),(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":r[3]||(r[3]=e=>p.value=e),class:"form-input description-input",placeholder:"请输入提案内容...",rows:"3"},null,512),[[n.Jo,p.value]])]),(0,s.Lk)("div",Ae,[r[23]||(r[23]=(0,s.Lk)("label",{class:"form-label"},[(0,s.Lk)("span",{class:"label-icon"},"⏳"),(0,s.eW)(" 投票时长（小时） ")],-1)),(0,s.Lk)("div",Fe,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":r[4]||(r[4]=e=>c.value=e),type:"number",min:"1",class:"form-input duration-input",placeholder:"输入小时数"},null,512),[[n.Jo,c.value,void 0,{number:!0}]]),r[22]||(r[22]=(0,s.Lk)("span",{class:"duration-unit"},"小时",-1))])])]),(0,s.Lk)("div",De,[(0,s.Lk)("button",{onClick:r[5]||(r[5]=e=>u.value=!1),class:"modal-btn cancel-btn"}," 取消 "),(0,s.Lk)("button",{onClick:He,class:"modal-btn confirm-btn"},r[24]||(r[24]=[(0,s.Lk)("span",{class:"btn-icon"},"🚀",-1),(0,s.eW)(" 立即创建 ")]))])])])):(0,s.Q3)("",!0)])),_:1})]))}},Qe=a(1241);const je=(0,Qe.A)(Ve,[["__scopeId","data-v-3da0e2be"]]);var qe=je;(0,n.Ef)(qe).mount("#app")}},t={};function a(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,n,s,i){if(!n){var r=1/0;for(p=0;p<e.length;p++){n=e[p][0],s=e[p][1],i=e[p][2];for(var l=!0,o=0;o<n.length;o++)(!1&i||r>=i)&&Object.keys(a.O).every((function(e){return a.O[e](n[o])}))?n.splice(o--,1):(l=!1,i<r&&(r=i));if(l){e.splice(p--,1);var u=s();void 0!==u&&(t=u)}}return t}i=i||0;for(var p=e.length;p>0&&e[p-1][2]>i;p--)e[p]=e[p-1];e[p]=[n,s,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,i,r=n[0],l=n[1],o=n[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(s in l)a.o(l,s)&&(a.m[s]=l[s]);if(o)var p=o(a)}for(t&&t(n);u<r.length;u++)i=r[u],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(p)},n=self["webpackChunktestweb1"]=self["webpackChunktestweb1"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(2468)}));n=a.O(n)})();
//# sourceMappingURL=app.7dc3733e.js.map